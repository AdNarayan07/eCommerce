import{r as c,g as f,u as x,n as b,j as t,c as u}from"./index-Ej1216eK.js";import{r as j}from"./authApi-DyI81cUX.js";import{F as v,v as y}from"./FormFields-DV6ItUOQ.js";import{u as w}from"./useAuthRedirect-BAMBD_te.js";const S=()=>{const[r,d]=c.useState({username:"",displayname:"",email:"",phone:"",address:"",password:"",password2:"",role:"shopper"}),[a,o]=c.useState({}),g=f(),n=x();w(!0);const p=s=>{d({...r,[s.target.name]:s.target.value}),o({...a,[s.target.name]:""})},h=async s=>{var l,m;s.preventDefault();const i=y(r);if(Object.keys(i).length>0){o(i);return}try{n(u(!0));const e=await j(r);alert(e.message),g("/login")}catch(e){console.error(e),alert(((m=(l=e.response)==null?void 0:l.data)==null?void 0:m.message)||e.message||e)}finally{n(u(!1))}};return b.done(),t.jsx("div",{className:"flex justify-center items-center h-full",children:t.jsxs("form",{onSubmit:h,className:"bg-white p-6 rounded shadow-md w-full",children:[t.jsx("h1",{className:"text-xl mb-4",children:"Register"}),t.jsx(v,{form:r,errors:a,handleChange:p,isEditable:!0,isRegistrationForm:!0}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Register"})]})})};export{S as default};
