import{b,n as j,j as e,t as E,a as C,u as D,r as o,L as F,c as k}from"./index-CgZGQlFR.js";import{d as A}from"./ordersApi-XeE1hMh7.js";import{N as I}from"./403-sQ6kfsVB.js";import T from"./404-B2cgzLf5.js";import{h as $,c as g}from"./functions-DhrN1Fze.js";import{I as P}from"./ImageWithFallback-D6fm_g1t.js";const U=()=>{const n=b();return j.done(),e.jsx("div",{className:"h-screen flex flex-col items-center justify-center bg-gray-100 text-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-bold text-blue-600 mb-4",children:"500"}),e.jsx("p",{className:"text-2xl font-semibold mb-6",children:"Internal Server Error"}),e.jsx("p",{className:"text-lg text-gray-500 mb-8",children:"See browser console for details."}),e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-blue-600 transition duration-300",onClick:()=>n("/"),children:"Go back to Homepage"})]})})},z=()=>{const{id:n}=E(),u=C(s=>s.auth.token),x=D(),f=b(),[a,y]=o.useState(null),[m,h]=o.useState(null);o.useEffect(()=>{(async()=>{try{const r=await A(n,u);console.log("meow",r),y(r),h(null)}catch(r){$(r,f,x,!1),h(r)}finally{x(k(!1)),j.done()}})()},[]);const N=()=>{const s=a.Product,r=a.User,t=s==null?void 0:s.User,v=["Placed",a.status],w=["Placed","Shipped","Out for Delivery","Delivered"],c=a.status==="Cancelled by Seller"||a.status==="Cancelled by Shopper"?v:w,S=()=>{const l=c.indexOf(a.status),i=c.length-1;return l/i*100},d=a.price,p=a.deliveryFee,O=d+p;return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:`bg-${g(a.status)}-600 h-2.5 rounded-full`,style:{width:`${S()}%`}})}),e.jsx("div",{className:"flex justify-between text-sm text-gray-700 mb-6",children:c.map((l,i)=>e.jsx("span",{className:`${l===a.status?`font-bold text-${g(l)}-950`:""}`,children:l},i))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg mb-6 border border-gray-300 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2 border-gray-300",children:"Seller Address"}),t?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 font-bold",children:t.displayname}),e.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-[inherit] leading-relaxed mb-2",children:t.address}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Email: "}),t.email]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Phone: "}),t.phone]})]}):e.jsx("p",{className:"italic",children:"Product and its Info are Deleted"})]}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg border border-gray-300 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2 border-gray-300",children:"Buyer Address"}),r?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 font-bold",children:r.displayname}),e.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-[inherit] leading-relaxed mb-2",children:r.address}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Email: "}),r.email]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Phone: "}),r.phone]})]}):e.jsx("p",{className:"italic",children:"Buyer Account Deleted"})]})]}),e.jsxs("div",{className:"bg-gray-100 flex flex-wrap p-4 border-2 rounded-lg h-fit",children:[e.jsx(P,{src:`http://localhost:3000/images/${s==null?void 0:s.id}`,fallbackSrc:"/images/default.jpg",className:"max-w-64 max-h-96 rounded-lg object-cover mr-4"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:(s==null?void 0:s.name)||e.jsx("i",{children:"Deleted Product"})}),e.jsx("hr",{className:"border-gray-400 border-b mb-2"}),e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.shortDescription}),e.jsxs("p",{className:`text-green-600 font-bold ${!(s!=null&&s.price)&&"italic"}`,children:["₹",(s==null?void 0:s.price)||d/a.quantity]})]}),e.jsx("h3",{className:"text-lg font-semibold mt-4",children:"Order Summary"}),e.jsx("hr",{className:"border-gray-400 border-b mb-2"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex space-x-4 justify-between",children:[e.jsx("span",{children:"Total Units Ordered"}),e.jsx("span",{children:a.quantity})]}),e.jsxs("li",{className:"flex space-x-4 justify-between",children:[e.jsx("span",{children:"Total Price"}),e.jsxs("span",{children:["₹",d.toFixed(2)]})]}),e.jsxs("li",{className:"flex space-x-4 justify-between",children:[e.jsx("span",{children:"Delivery Charges"}),e.jsxs("span",{children:["₹",p.toFixed(2)]})]}),e.jsxs("li",{className:"flex space-x-4 justify-between font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["₹",O.toFixed(2)]})]})]})]})]})]})]})};if(m)switch(m.status){case 403:return e.jsx(I,{});case 404:return e.jsx(T,{});default:return e.jsx(U,{})}return a?e.jsx(N,{}):e.jsx(F,{component:"Order"})};export{z as default};
